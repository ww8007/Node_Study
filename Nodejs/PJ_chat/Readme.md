# 채팅 프로그램 만들기

### 목차

1. 채팅 구현하기
1. 서버 확장 고려하기

### socket.io

Node.js용 소켓 프로그래밍 지원
서버와의 양방향 통신
클라이언트와 서버와 연결

### 단방향 구현 채팅 (ajax)

- 2초마다 ajax로 DB에 채팅이 있는지 체크(2초는 예시)
- ajax 요청에 대해 응답 client페이지 채팅반영

리소스 낭비가 일어나게 됨

### 양방향 채팅

- 연결된 모든 사람들에게 뿌려줌
- 서버는 수동적인 역할만 함

양방향 - 소켓 프로그래밍

### socket.io 작동방식

- websocket 지원하는 브라우저에서는 그대로 작동

- 버전이 낮은 경우
  1. 플래시 설치의 경우 -> 플래시로 동작
  1. ajax로 중간중간마다 체크한다.
  1. ifrmae 또는 streaming 등으로 실행

* 요즘에는 브라우저 버전이 낮은 경우 -> 사용자에게 버전을 높히도록 요청을 가능

### 작동흐름

1. 웹페이지 접속
1. 클라이언트 var socket = io();
1. 서버와 연결관계를 맺음
1. 서버에 이벤트로 emit
1. 전체 클라이언트에 메세지 전달
